SkyJoystick.AnalogStick=CLASS({preset:()=>{return DIV},params:()=>{return{style:{position:"fixed",left:20,bottom:20,zIndex:999}}},init:(t,e,n)=>{let o=n.img;e.append(o);let i;e.on("touchstart",t=>{let n=e.getLeft()+e.getWidth()/2,o=e.getTop()+e.getHeight()/2,f=RAR(t,t=>{EACH(t.getPositions(),t=>{if(t.left<WIN_WIDTH()/2){let f=180*Math.atan2(t.top-o,t.left-n)/Math.PI;i!==f&&(i=f,e.fireEvent("change"))}})}),u=EVENT("touchmove",t=>{f(t)}),r=EVENT("touchend",()=>{u.remove(),r.remove(),e.fireEvent("touchend")});t.stop()});e.getAngle=(()=>{return i})}}),SkyJoystick.DPad=CLASS({preset:()=>{return DIV},params:()=>{return{style:{position:"fixed",left:20,bottom:20,zIndex:999}}},init:(t,e,n)=>{let o=n.img;e.append(o);let i;e.on("touchstart",t=>{let n=e.getLeft()+e.getWidth()/2,o=e.getTop()+e.getHeight()/2,f=RAR(t,t=>{EACH(t.getPositions(),t=>{if(t.left<WIN_HEIGHT()/2){let f=180*Math.atan2(t.top-o,t.left-n)/Math.PI;f>-135&&f<=-45?"up"!==i&&(i="up",e.fireEvent("up")):f>-45&&f<=45?"right"!==i&&(i="right",e.fireEvent("right")):f>45&&f<=135?"down"!==i&&(i="down",e.fireEvent("down")):(f>135&&f<=180||f>=-180&&f<=-135)&&"left"!==i&&(i="left",e.fireEvent("left"))}})}),u=EVENT("touchmove",t=>{f(t)}),r=EVENT("touchend",t=>{u.remove(),r.remove(),e.fireEvent("touchend")});t.stop()})}}),SkyJoystick.DPad45=CLASS({preset:()=>{return DIV},params:()=>{return{style:{position:"fixed",left:20,bottom:20,zIndex:999}}},init:(t,e,n)=>{let o=n.img;e.append(o);let i;e.on("touchstart",t=>{let n=e.getLeft()+e.getWidth()/2,o=e.getTop()+e.getHeight()/2,f=RAR(t,t=>{EACH(t.getPositions(),t=>{t.left<WIN_HEIGHT()/2&&(t.left>n?t.top<o?"up"!==i&&(i="up",e.fireEvent("up")):"right"!==i&&(i="right",e.fireEvent("right")):t.top>o?"down"!==i&&(i="down",e.fireEvent("down")):"left"!==i&&(i="left",e.fireEvent("left")))})}),u=EVENT("touchmove",t=>{f(t)}),r=EVENT("touchend",()=>{u.remove(),r.remove(),e.fireEvent("touchend")});t.stop()})}}),SkyJoystick.Key=CLASS({preset:()=>{return DIV},init:(t,e,n)=>{let o=n.img,i=n.value;e.append(o),e.on("touchstart",t=>{t.stop()}),e.on("touchend",t=>{t.stop()});e.getValue=(()=>{return i})}}),SkyJoystick.KeySet=CLASS({preset:()=>{return DIV},params:()=>{return{style:{position:"fixed",right:20,bottom:20,zIndex:999}}},init:(t,e,n)=>{let o,i=n.keys;EACH(i,(t,n)=>{t.addStyle({marginLeft:10,marginTop:10,flt:"left"}),t.on("touchstart",n=>{o!==t.getValue()&&(o=t.getValue(),e.fireEvent("change"))}),t.on("touchend",t=>{o=void 0,e.fireEvent("touchend")}),e.append(t),3===i.length&&0===n&&(t.addStyle({flt:"right"}),e.append(CLEAR_BOTH())),4===i.length&&1===n&&e.append(CLEAR_BOTH())}),e.append(CLEAR_BOTH());let f=(e.getValue=(()=>{return o}),t=>{EACH(t.getPositions(),t=>{t.left>WIN_HEIGHT()/2&&EACH(i,(n,i)=>{o!==n.getValue()&&t.left>=n.getLeft()&&t.left<=n.getLeft()+n.getWidth()&&t.top>=n.getTop()&&t.top<=n.getTop()+n.getHeight()&&(o=n.getValue(),e.fireEvent("change"))})})});e.on("touchstart",f),e.on("touchmove",f)}}),SkyJoystick.LeftAndRight=CLASS({preset:()=>{return DIV},params:()=>{return{style:{position:"fixed",left:20,bottom:20,zIndex:999}}},init:(t,e,n)=>{let o=n.img;e.append(o);let i;e.on("touchstart",t=>{let n=e.getLeft()+e.getWidth()/2,o=RAR(t,t=>{EACH(t.getPositions(),t=>{t.left<WIN_HEIGHT()/2&&(t.left>n?"right"!==i&&(i="right",e.fireEvent("right")):"left"!==i&&(i="left",e.fireEvent("left")))})}),f=EVENT("touchmove",t=>{o(t)}),u=EVENT("touchend",()=>{f.remove(),u.remove(),e.fireEvent("touchend")});t.stop()})}});